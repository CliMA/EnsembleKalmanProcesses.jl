<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>EnsembleKalmanProcess · EnsembleKalmanProcesses.jl</title><meta name="title" content="EnsembleKalmanProcess · EnsembleKalmanProcesses.jl"/><meta property="og:title" content="EnsembleKalmanProcess · EnsembleKalmanProcesses.jl"/><meta property="twitter:title" content="EnsembleKalmanProcess · EnsembleKalmanProcesses.jl"/><meta name="description" content="Documentation for EnsembleKalmanProcesses.jl."/><meta property="og:description" content="Documentation for EnsembleKalmanProcesses.jl."/><meta property="twitter:description" content="Documentation for EnsembleKalmanProcesses.jl."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="EnsembleKalmanProcesses.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnsembleKalmanProcesses.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../installation_instructions/">Installation instructions</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Examples</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../literated/sinusoid_example/">Simple example</a></li><li><a class="tocitem" href="../../examples/Cloudy_example/">Cloudy</a></li><li><a class="tocitem" href="../../examples/lorenz_example/">Lorenz</a></li><li><a class="tocitem" href="../../literated/loss_minimization/">Minimization Loss</a></li><li><a class="tocitem" href="../../literated/loss_minimization_sparse_eki/">Sparse Minimization Loss</a></li><li><a class="tocitem" href="../../literated/aerosol_activation/">Aerosol activation</a></li><li><a class="tocitem" href="../../examples/darcy/">Darcy flow</a></li><li><a class="tocitem" href="../../examples/sinusoid_example_toml/">TOML interface</a></li><li><a class="tocitem" href="../../examples/ClimateMachine_example/">HPC interfacing example: ClimateMachine</a></li><li><a class="tocitem" href="../../examples/template_example/">Template</a></li></ul></li><li><a class="tocitem" href="../../defaults/">List of default configurations</a></li><li><a class="tocitem" href="../../ensemble_kalman_inversion/">Ensemble Kalman Inversion</a></li><li><a class="tocitem" href="../../gauss_newton_kalman_inversion/">Gauss Newton Kalman Inversion</a></li><li><a class="tocitem" href="../../ensemble_kalman_sampler/">Ensemble Kalman Sampler</a></li><li><a class="tocitem" href="../../unscented_kalman_inversion/">Unscented Kalman Inversion</a></li><li><a class="tocitem" href="../../learning_rate_scheduler/">Learning rate schedulers</a></li><li><a class="tocitem" href="../../parameter_distributions/">Prior distributions</a></li><li><a class="tocitem" href="../../observations/">Observations and Minibatching</a></li><li><a class="tocitem" href="../../update_groups/">Update Groups</a></li><li><a class="tocitem" href="../../localization/">Localization and SEC</a></li><li><a class="tocitem" href="../../accelerators/">Accelerators</a></li><li><a class="tocitem" href="../../inflation/">Inflation</a></li><li><a class="tocitem" href="../../failure_handling/">Failure handling</a></li><li><a class="tocitem" href="../../parallel_hpc/">Parallelism and HPC</a></li><li><a class="tocitem" href="../../internal_data_representation/">Internal data representation</a></li><li><a class="tocitem" href="../../visualization/">Visualization</a></li><li><a class="tocitem" href="../../troubleshooting/">Troubleshooting</a></li><li><input class="collapse-toggle" id="menuitem-21" type="checkbox" checked/><label class="tocitem" for="menuitem-21"><span class="docs-label">API</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../ParameterDistributions/">ParameterDistributions</a></li><li><a class="tocitem" href="../Observations/">Observations</a></li><li><a class="tocitem" href="../DataContainers/">DataContainers</a></li><li class="is-active"><a class="tocitem" href>EnsembleKalmanProcess</a><ul class="internal"><li><a class="tocitem" href="#Primary-objects-and-functions"><span>Primary objects and functions</span></a></li><li><a class="tocitem" href="#Getter-functions"><span>Getter functions</span></a></li><li><a class="tocitem" href="#errors_api"><span>Error metrics</span></a></li><li><a class="tocitem" href="#scheduler_api"><span>Learning Rate Schedulers</span></a></li><li><a class="tocitem" href="#Failure-and-NaN-handling"><span>Failure and NaN handling</span></a></li><li><a class="tocitem" href="#process_api"><span>Process-specific</span></a></li></ul></li><li><a class="tocitem" href="../Inversion/">Inversion</a></li><li><a class="tocitem" href="../Unscented/">Unscented</a></li><li><a class="tocitem" href="../Sampler/">Sampler</a></li><li><a class="tocitem" href="../SparseInversion/">SparseInversion</a></li><li><a class="tocitem" href="../TOMLInterface/">TOML Interface</a></li><li><a class="tocitem" href="../Localizers/">Localizers</a></li><li><a class="tocitem" href="../Visualize/">Visualize</a></li></ul></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li><li><a class="tocitem" href="../../glossary/">Glossary</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>EnsembleKalmanProcess</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>EnsembleKalmanProcess</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/main/docs/src/API/EnsembleKalmanProcess.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="EnsembleKalmanProcess"><a class="docs-heading-anchor" href="#EnsembleKalmanProcess">EnsembleKalmanProcess</a><a id="EnsembleKalmanProcess-1"></a><a class="docs-heading-anchor-permalink" href="#EnsembleKalmanProcess" title="Permalink"></a></h1><h2 id="Primary-objects-and-functions"><a class="docs-heading-anchor" href="#Primary-objects-and-functions">Primary objects and functions</a><a id="Primary-objects-and-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Primary-objects-and-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.EnsembleKalmanProcess" href="#EnsembleKalmanProcesses.EnsembleKalmanProcess"><code>EnsembleKalmanProcesses.EnsembleKalmanProcess</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">EnsembleKalmanProcess{FT &lt;: AbstractFloat, IT &lt;: Int, P &lt;: Process}</code></pre><p>Structure that is used in Ensemble Kalman processes.</p><p><strong>Fields</strong></p><ul><li><p><code>u::Array{EnsembleKalmanProcesses.DataContainers.DataContainer{FT}} where FT&lt;:AbstractFloat</code></p><p>array of stores for parameters (<code>u</code>), each of size [<code>N_par × N_ens</code>]</p></li><li><p><code>observation_series::ObservationSeries</code></p><p>Container for the observation(s) - and minibatching mechanism</p></li><li><p><code>N_ens::Int64</code></p><p>ensemble size</p></li><li><p><code>g::Array{EnsembleKalmanProcesses.DataContainers.DataContainer{FT}} where FT&lt;:AbstractFloat</code></p><p>Array of stores for forward model outputs, each of size  [<code>N_obs × N_ens</code>]</p></li><li><p><code>error_metrics::Dict</code></p><p>Dict of error metric</p></li><li><p><code>scheduler::EnsembleKalmanProcesses.LearningRateScheduler</code></p><p>Scheduler to calculate the timestep size in each EK iteration</p></li><li><p><code>accelerator::EnsembleKalmanProcesses.Accelerator</code></p><p>accelerator object that informs EK update steps, stores additional state variables as needed</p></li><li><p><code>Δt::Vector{FT} where FT&lt;:AbstractFloat</code></p><p>stored vector of timesteps used in each EK iteration</p></li><li><p><code>update_groups::AbstractVector</code></p><p>vector of update groups, defining which parameters should be updated by which data</p></li><li><p><code>process::EnsembleKalmanProcesses.Process</code></p><p>the particular EK process (<code>Inversion</code> etc.)</p></li><li><p><code>rng::Random.AbstractRNG</code></p><p>Random number generator object (algorithm + seed) used for sampling and noise, for reproducibility. Defaults to <code>Random.GLOBAL_RNG</code>.</p></li><li><p><code>failure_handler::FailureHandler</code></p><p>struct storing failsafe update directives</p></li><li><p><code>localizer::EnsembleKalmanProcesses.Localizers.Localizer</code></p><p>Localization kernel, implemented for (<code>Inversion</code>, <code>SparseInversion</code>, <code>Unscented</code>)</p></li><li><p><code>nan_tolerance::AbstractFloat</code></p><p>Fraction of allowable <code>NaN</code>s in model output before an ensemble member is considered a failed member and handled by failure handler</p></li><li><p><code>nan_row_values::Union{Nothing, AbstractVector}</code></p><p>Default-value vector to impute over entire-NaN rows of data (<code>get_obs(ekp)</code> used if value <code>nothing</code>)</p></li><li><p><code>verbose::Bool</code></p><p>Whether to print diagnostics for each EK iteration</p></li></ul><p><strong>Generic constructor</strong></p><pre><code class="nohighlight hljs">EnsembleKalmanProcess(
    params::AbstractMatrix{FT},
    observation_series::OS,
    obs_noise_cov::Union{AbstractMatrix{FT}, UniformScaling{FT}},
    process::P;
    scheduler = DefaultScheduler(1),
    Δt = FT(1),
    rng::AbstractRNG = Random.GLOBAL_RNG,
    failure_handler_method::FM = IgnoreFailures(),
    nan_tolerance = 0.1,
    nan_row_values = nothing,
    localization_method::LM = NoLocalization(),
    verbose::Bool = false,
) where {FT &lt;: AbstractFloat, P &lt;: Process, FM &lt;: FailureHandlingMethod, LM &lt;: LocalizationMethod, OS &lt;: ObservationSeries}</code></pre><p>Inputs:</p><ul><li><code>params</code>                 :: Initial parameter ensemble</li><li><code>observation_series</code>     :: Container for observations (and possible minibatching)</li><li><code>process</code>                :: Algorithm used to evolve the ensemble</li><li><code>scheduler</code>              :: Adaptive timestep calculator </li><li><code>Δt</code>                     :: Initial time step or learning rate</li><li><code>rng</code>                    :: Random number generator</li><li><code>failure_handler_method</code> :: Method used to handle particle failures</li><li><code>nan_tolerance</code>          :: Fraction of allowable NaNs in ensemble member before considered failure (0.1 by default)</li><li><code>nan_row_values</code>         :: Default-value vector to impute over entire-NaN rows of data (<code>get_obs(ekp)</code> used if value <code>nothing</code>)</li><li><code>localization_method</code>    :: Method used to localize sample covariances</li><li><code>verbose</code>                :: Whether to print diagnostic information</li></ul><p><strong>Other constructors:</strong></p><pre><code class="language-julia hljs">EnsembleKalmanProcess(u, observation_series, N_ens, g, error_metrics, scheduler, accelerator, Δt, update_groups, process, rng, failure_handler, localizer, nan_tolerance, nan_row_values, verbose)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanProcess.jl#L209"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanProcess.jl:209</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(params, observation_series, process, configuration)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanProcess.jl#L244"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanProcess.jl:244</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(params, observation_series, process)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanProcess.jl#L342"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanProcess.jl:342</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(params, observation, args)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanProcess.jl#L401"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanProcess.jl:401</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(params, obs, obs_noise_cov, args)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanProcess.jl#L411"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanProcess.jl:411</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(observation_series, process)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedKalmanInversion.jl#L256"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedKalmanInversion.jl:256</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(observation, process)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedKalmanInversion.jl#L267"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedKalmanInversion.jl:267</code></a>.</p><pre><code class="language-julia hljs">EnsembleKalmanProcess(obs_mean, obs_noise_cov, process)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedKalmanInversion.jl#L278"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedKalmanInversion.jl:278</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L156-L199">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.construct_initial_ensemble" href="#EnsembleKalmanProcesses.construct_initial_ensemble"><code>EnsembleKalmanProcesses.construct_initial_ensemble</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">construct_initial_ensemble(rng::Random.AbstractRNG, prior::EnsembleKalmanProcesses.ParameterDistributions.ParameterDistribution, N_ens::Int64) -&gt; Any
</code></pre><p>Construct the initial parameters, by sampling <code>N_ens</code> samples from specified prior distribution. Returned with parameters as columns in unconstrained space by default (constrain by setting <code>constrained=true</code>)</p><p>Note: <code>Unscented</code> and <code>TransformUnscented</code> processes require different arguments than the other processes</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L879">source</a></section><section><div><pre><code class="language-julia hljs">construct_initial_ensemble(prior::EnsembleKalmanProcesses.ParameterDistributions.ParameterDistribution, process::Union{TransformUnscented, Unscented}) -&gt; Any
</code></pre><p>Constructs the initial ensemble for the <code>Unscented</code> or <code>TransformUnscented process.  Returned with parameters as columns in unconstrained space by default (constrain by setting</code>constrained=true`)</p><p>NOTE: This function is created just to see what the initial <code>sigma_ensemble</code> will be without constructing the EKP object. Do not pass the initial ensemble into the <code>EnsembleKalmanProcess</code> object.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L293">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.update_ensemble!" href="#EnsembleKalmanProcesses.update_ensemble!"><code>EnsembleKalmanProcesses.update_ensemble!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">update_ensemble!(ekp::EnsembleKalmanProcess, g_in::AbstractMatrix) -&gt; Any
</code></pre><p>Updates the ensemble according to an Inversion process. Inputs:</p><ul><li>ekp :: The EnsembleKalmanProcess to update.</li><li>g :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li>multiplicative_inflation :: Flag indicating whether to use multiplicative inflation.</li><li>additive_inflation :: Flag indicating whether to use additive inflation.</li><li>additive<em>inflation</em>cov ::  specifying an additive inflation matrix (default is the prior covariance) assumed positive semi-definite      If false (default), parameter covariance from the current iteration is used.</li><li>s :: Scaling factor for time step in inflation step.</li><li>ekp<em>kwargs :: Keyword arguments to pass to standard ekp update</em>ensemble!.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1320">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(ekp::EnsembleKalmanProcess{FT, IT, II&lt;:Inversion}, g::AbstractArray{FT, 2}, process::Inversion, u_idx::Vector{Int64}, g_idx::Vector{Int64}) -&gt; Any
</code></pre><p>Updates the ensemble according to an Inversion process. </p><p>Inputs:</p><ul><li><code>ekp</code> :: The EnsembleKalmanProcess to update.</li><li><code>g</code> :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li><code>process</code> :: Type of the EKP.</li><li><code>u_idx</code> :: indices of u to update (see <code>UpdateGroup</code>)</li><li><code>g_idx</code> :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li><code>deterministic_forward_map</code> :: Whether output <code>g</code> comes from a deterministic model.</li><li><code>failed_ens</code> :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code> with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanInversion.jl#L188">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(
    ekp::EnsembleKalmanProcess{FT, IT, TransformInversion},
    g::AbstractMatrix{FT},
    process::TransformInversion;
    failed_ens = nothing,
) where {FT, IT}</code></pre><p>Updates the ensemble according to a TransformInversion process. </p><p>Inputs:</p><ul><li>ekp :: The EnsembleKalmanProcess to update.</li><li>g :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li>process :: Type of the EKP.</li><li>u_idx :: indices of u to update (see <code>UpdateGroup</code>)</li><li>g_idx :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li>failed_ens :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code> with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L194-L211">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(
    ekp::EnsembleKalmanProcess{FT, IT, GaussNewtonInversion},
    g::AbstractMatrix{FT},
    process::GaussNewtonInversion;
    deterministic_forward_map::Bool = true,
    failed_ens = nothing,
) where {FT, IT}</code></pre><p>Updates the ensemble according to an GaussNewtonInversion process. The specific update is given by Algorithm 4.1 of Chada, Chen, Sanz-Alonso (2021), https://doi.org/10.3934/fods.2021011, a.k.a Iterated Ensemble Kalman Filter with Statistical Linearization (IEKF-SL)</p><p>Inputs:</p><ul><li>ekp :: The EnsembleKalmanProcess to update.</li><li>g :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li>process :: Type of the EKP.</li><li>deterministic<em>forward</em>map :: Whether output <code>g</code> comes from a deterministic model.</li><li>failed_ens :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code> with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/GaussNewtonKalmanInversion.jl#L121-L140">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(
    ekp::EnsembleKalmanProcess{FT, IT, SparseInversion{FT}},
    g::AbstractMatrix{FT},
    process::SparseInversion{FT};
    deterministic_forward_map = true,
    failed_ens = nothing,
) where {FT, IT}</code></pre><p>Updates the ensemble according to a SparseInversion process. </p><p>Inputs:</p><ul><li><code>ekp</code> :: The EnsembleKalmanProcess to update.</li><li><code>g</code> :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li><code>process</code> :: Type of the EKP.</li><li><code>u_idx</code> :: indices of u to update (see <code>UpdateGroup</code>)</li><li><code>g_idx</code> :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li><code>deterministic_forward_map</code> :: Whether output <code>g</code> comes from a deterministic model.</li><li><code>failed_ens</code> :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code>  with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/SparseEnsembleKalmanInversion.jl#L181-L201">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(
    ekp::EnsembleKalmanProcess{FT, IT, Sampler{FT,ST}},
    g::AbstractMatrix{FT},
    process::Sampler{FT, ST};
    failed_ens = nothing,
) where {FT, IT, ST}</code></pre><p>Updates the ensemble according to a Sampler process. </p><p>Inputs:</p><ul><li><code>ekp</code> :: The EnsembleKalmanProcess to update.</li><li><code>g</code> :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li><code>process</code> :: Type of the EKP.</li><li><code>u_idx</code> :: indices of u to update (see <code>UpdateGroup</code>)</li><li><code>g_idx</code> :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li><code>failed_ens</code> :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code>  with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanSampler.jl#L185-L203">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(uki::EnsembleKalmanProcess{FT&lt;:AbstractFloat, IT&lt;:Int64, TU&lt;:TransformUnscented}, g::AbstractArray{FT&lt;:AbstractFloat, 2}, process::TransformUnscented, u_idx::Vector{Int64}, g_idx::Vector{Int64}) -&gt; Any
</code></pre><p>Updates the ensemble according to an TransformUnscented process. </p><p>Inputs:</p><ul><li><code>uki</code>        :: The EnsembleKalmanProcess to update.</li><li><code>g_in</code>       :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li><code>process</code> :: Type of the EKP.</li><li><code>u_idx</code> :: indices of u to update (see <code>UpdateGroup</code>)</li><li><code>g_idx</code> :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li><code>group_idx</code> :: the label of the update group (1 is &quot;first update this iteration&quot;)</li><li><code>failed_ens</code> :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code>  with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedTransformKalmanInversion.jl#L303">source</a></section><section><div><pre><code class="language-julia hljs">update_ensemble!(
    uki::EnsembleKalmanProcess{FT, IT, Unscented},
    g_in::AbstractMatrix{FT},
    process::Unscented;
    failed_ens = nothing,
) where {FT &lt;: AbstractFloat, IT &lt;: Int}</code></pre><p>Updates the ensemble according to an Unscented process. </p><p>Inputs:</p><ul><li><code>uki</code>        :: The EnsembleKalmanProcess to update.</li><li><code>g_in</code>       :: Model outputs, they need to be stored as a <code>N_obs × N_ens</code> array (i.e data are columms).</li><li><code>process</code> :: Type of the EKP.</li><li><code>u_idx</code> :: indices of u to update (see <code>UpdateGroup</code>)</li><li><code>g_idx</code> :: indices of g,y,Γ with which to update u (see <code>UpdateGroup</code>)</li><li><code>group_idx</code> :: the label of the update group (1 is &quot;first update this iteration&quot;)</li><li><code>failed_ens</code> :: Indices of failed particles. If nothing, failures are computed as columns of <code>g</code>  with NaN entries.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L794-L813">source</a></section></article><h2 id="Getter-functions"><a class="docs-heading-anchor" href="#Getter-functions">Getter functions</a><a id="Getter-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Getter-functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u" href="#EnsembleKalmanProcesses.get_u"><code>EnsembleKalmanProcesses.get_u</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u(ekp::EnsembleKalmanProcess, iteration::IT; return_array=true) where {IT &lt;: Integer}</code></pre><p>Returns the unconstrained parameters at the given iteration. Returns a DataContainer object unless <code>return_array</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L426-L430">source</a></section><section><div><pre><code class="language-julia hljs">get_u(ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Returns the unconstrained parameters from all iterations. The outer dimension is given by the number of iterations, and the inner objects are <code>DataContainer</code> objects unless <code>return_array</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L458-L463">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_g" href="#EnsembleKalmanProcesses.get_g"><code>EnsembleKalmanProcesses.get_g</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_g(ekp::EnsembleKalmanProcess, iteration::IT; return_array=true) where {IT &lt;: Integer}</code></pre><p>Returns the forward model evaluations at the given iteration. Returns a <code>DataContainer</code> object unless <code>return_array</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L435-L439">source</a></section><section><div><pre><code class="language-julia hljs">get_g(ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Returns the forward model evaluations from all iterations. The outer dimension is given by the number of iterations, and the inner objects are <code>DataContainer</code> objects unless <code>return_array</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L469-L474">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_ϕ" href="#EnsembleKalmanProcesses.get_ϕ"><code>EnsembleKalmanProcesses.get_ϕ</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_ϕ(prior::ParameterDistribution, ekp::EnsembleKalmanProcess, iteration::IT; return_array=true)</code></pre><p>Returns the constrained parameters at the given iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L444-L448">source</a></section><section><div><pre><code class="language-julia hljs">get_ϕ(prior::ParameterDistribution, ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Returns the constrained parameters from all iterations. The outer dimension is given by the number of iterations, and the inner objects are <code>DataContainer</code> objects unless <code>return_array</code> is true.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L480-L485">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs-Tuple{EnsembleKalmanProcess}" href="#EnsembleKalmanProcesses.get_obs-Tuple{EnsembleKalmanProcess}"><code>EnsembleKalmanProcesses.get_obs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Get the observation from the current batch in <code>ObservationSeries</code> build=false: returns a vector of vectors, build=true: returns a concatenated vector,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L844">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs-Tuple{EnsembleKalmanProcess, Any}" href="#EnsembleKalmanProcesses.get_obs-Tuple{EnsembleKalmanProcess, Any}"><code>EnsembleKalmanProcesses.get_obs</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs(ekp::EnsembleKalmanProcess, iteration) -&gt; Any
</code></pre><p>Get the observation for <code>iteration</code> from the <code>ObservationSeries</code> build=false: returns a vector of vectors, build=true: returns a concatenated vector,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L855">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs_noise_cov-Tuple{EnsembleKalmanProcess}" href="#EnsembleKalmanProcesses.get_obs_noise_cov-Tuple{EnsembleKalmanProcess}"><code>EnsembleKalmanProcesses.get_obs_noise_cov</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs_noise_cov(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Get the <code>obs_noise_cov</code> from the current batch in <code>ObservationSeries</code> build=false:, returns a vector of blocks, build=true: returns a block matrix,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L747">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs_noise_cov-Tuple{EnsembleKalmanProcess, Any}" href="#EnsembleKalmanProcesses.get_obs_noise_cov-Tuple{EnsembleKalmanProcess, Any}"><code>EnsembleKalmanProcesses.get_obs_noise_cov</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs_noise_cov(ekp::EnsembleKalmanProcess, iteration) -&gt; Any
</code></pre><p>Get the <code>obs_noise_cov</code> for <code>iteration</code> from the <code>ObservationSeries</code> build=false:, returns a vector of blocks, build=true: returns a block matrix,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L758">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs_noise_cov_inv-Tuple{EnsembleKalmanProcess}" href="#EnsembleKalmanProcesses.get_obs_noise_cov_inv-Tuple{EnsembleKalmanProcess}"><code>EnsembleKalmanProcesses.get_obs_noise_cov_inv</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs_noise_cov_inv(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Get the <code>obs_noise_cov</code> inverse from the current batch in <code>ObservationSeries</code> build=false:, returns a vector of blocks, build=true: returns a block matrix,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L769">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_obs_noise_cov_inv-Tuple{EnsembleKalmanProcess, Any}" href="#EnsembleKalmanProcesses.get_obs_noise_cov_inv-Tuple{EnsembleKalmanProcess, Any}"><code>EnsembleKalmanProcesses.get_obs_noise_cov_inv</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_obs_noise_cov_inv(ekp::EnsembleKalmanProcess, iteration) -&gt; Any
</code></pre><p>Get the obs<em>noise</em>cov inverse for <code>iteration</code> from the <code>ObservationSeries</code> build=false:, returns a vector of blocks, build=true: returns a block matrix,</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L780">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u_final" href="#EnsembleKalmanProcesses.get_u_final"><code>EnsembleKalmanProcesses.get_u_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u_final(ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Get the unconstrained parameters at the last iteration, returning a <code>DataContainer</code> Object if <code>return_array</code> is false.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L539-L543">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_g_final" href="#EnsembleKalmanProcesses.get_g_final"><code>EnsembleKalmanProcesses.get_g_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_g_final(ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Get forward model outputs at the last iteration, returns a <code>DataContainer</code> Object if <code>return_array</code> is false.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L557-L561">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_ϕ_final" href="#EnsembleKalmanProcesses.get_ϕ_final"><code>EnsembleKalmanProcesses.get_ϕ_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_ϕ_final(ekp::EnsembleKalmanProcess; return_array=true)</code></pre><p>Get the constrained parameters at the last iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L566-L570">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u_mean" href="#EnsembleKalmanProcesses.get_u_mean"><code>EnsembleKalmanProcesses.get_u_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u_mean(ekp::EnsembleKalmanProcess, iteration::IT) where {IT &lt;: Integer}</code></pre><p>Returns the mean unconstrained parameter at the given iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L489-L493">source</a></section><section><div><pre><code class="language-julia hljs">get_u_mean(uki::EnsembleKalmanProcess{FT, IT, Unscented}, iteration::IT)</code></pre><p>Returns the mean unconstrained parameter at the requested iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L847-L851">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u_cov" href="#EnsembleKalmanProcesses.get_u_cov"><code>EnsembleKalmanProcesses.get_u_cov</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u_cov(ekp::EnsembleKalmanProcess, iteration::IT) where {IT &lt;: Integer}</code></pre><p>Returns the unconstrained parameter sample covariance at the given iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L507-L511">source</a></section><section><div><pre><code class="language-julia hljs">get_u_cov(uki::EnsembleKalmanProcess{FT, IT, Unscented}, iteration::IT)</code></pre><p>Returns the unconstrained parameter covariance at the requested iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L859-L863">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_g_mean" href="#EnsembleKalmanProcesses.get_g_mean"><code>EnsembleKalmanProcesses.get_g_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_g_mean(ekp::EnsembleKalmanProcess, iteration::IT) where {IT &lt;: Integer}</code></pre><p>Returns the mean forward map evaluation at the given iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L530-L534">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_ϕ_mean" href="#EnsembleKalmanProcesses.get_ϕ_mean"><code>EnsembleKalmanProcesses.get_ϕ_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_ϕ_mean(prior::ParameterDistribution, ekp::EnsembleKalmanProcess, iteration::IT)</code></pre><p>Returns the constrained transform of the mean unconstrained parameter at the given iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L498-L502">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u_mean_final" href="#EnsembleKalmanProcesses.get_u_mean_final"><code>EnsembleKalmanProcesses.get_u_mean_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u_mean_final(ekp::EnsembleKalmanProcess)</code></pre><p>Get the mean unconstrained parameter at the last iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L574-L578">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_u_cov_final" href="#EnsembleKalmanProcesses.get_u_cov_final"><code>EnsembleKalmanProcesses.get_u_cov_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_u_cov_final(ekp::EnsembleKalmanProcess)</code></pre><p>Get the mean unconstrained parameter covariance at the last iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L589-L593">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_g_mean_final" href="#EnsembleKalmanProcesses.get_g_mean_final"><code>EnsembleKalmanProcesses.get_g_mean_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_g_mean_final(ekp::EnsembleKalmanProcess)</code></pre><p>Get the mean forward model evaluation at the last iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L596-L600">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_ϕ_mean_final" href="#EnsembleKalmanProcesses.get_ϕ_mean_final"><code>EnsembleKalmanProcesses.get_ϕ_mean_final</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_ϕ_mean_final(prior::ParameterDistribution, ekp::EnsembleKalmanProcess)</code></pre><p>Get the constrained transform of the mean unconstrained parameter at the last iteration.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L581-L585">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_N_iterations" href="#EnsembleKalmanProcesses.get_N_iterations"><code>EnsembleKalmanProcesses.get_N_iterations</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_N_iterations(ekp::EnsembleKalmanProcess)</code></pre><p>Get number of times update has been called (equals <code>size(g)</code>, or <code>size(u)-1</code>).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L603-L607">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_N_ens" href="#EnsembleKalmanProcesses.get_N_ens"><code>EnsembleKalmanProcesses.get_N_ens</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_N_ens(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>N_ens</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L613-L616">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_accelerator" href="#EnsembleKalmanProcesses.get_accelerator"><code>EnsembleKalmanProcesses.get_accelerator</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_accelerator(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>accelerator</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L723-L726">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_scheduler" href="#EnsembleKalmanProcesses.get_scheduler"><code>EnsembleKalmanProcesses.get_scheduler</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_scheduler(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>scheduler</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L715-L718">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_process" href="#EnsembleKalmanProcesses.get_process"><code>EnsembleKalmanProcesses.get_process</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_process(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>process</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L691-L694">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_rng" href="#EnsembleKalmanProcesses.get_rng"><code>EnsembleKalmanProcesses.get_rng</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_rng(m::FixedMinibatcher) -&gt; Random.AbstractRNG
</code></pre><p>gets the <code>rng</code> field from the <code>FixedMinibatcher</code> object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/Observations.jl#L748">source</a></section><section><div><pre><code class="language-julia hljs">get_rng(m::RandomFixedSizeMinibatcher) -&gt; Random.AbstractRNG
</code></pre><p>gets the <code>rng</code> field from the <code>RandomFixesSizeMinibatcher</code> object</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/Observations.jl#L829">source</a></section><section><div><pre><code class="language-julia hljs">get_rng(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>rng</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L731-L734">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_Δt" href="#EnsembleKalmanProcesses.get_Δt"><code>EnsembleKalmanProcesses.get_Δt</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_Δt(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>Δt</code> field of EnsembleKalmanProcess. </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L621-L624">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_failure_handler" href="#EnsembleKalmanProcesses.get_failure_handler"><code>EnsembleKalmanProcesses.get_failure_handler</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_failure_handler(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>failure_handler</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L638-L641">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_localizer" href="#EnsembleKalmanProcesses.get_localizer"><code>EnsembleKalmanProcesses.get_localizer</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_localizer(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>localizer</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L699-L702">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_localizer_type" href="#EnsembleKalmanProcesses.get_localizer_type"><code>EnsembleKalmanProcesses.get_localizer_type</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_localizer_type(ekp::EnsembleKalmanProcess)</code></pre><p>Return first parametric type of the <code>localizer</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L707-L710">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_nan_tolerance" href="#EnsembleKalmanProcesses.get_nan_tolerance"><code>EnsembleKalmanProcesses.get_nan_tolerance</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_nan_tolerance(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>nan_tolerance</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L646-L649">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_nan_row_values" href="#EnsembleKalmanProcesses.get_nan_row_values"><code>EnsembleKalmanProcesses.get_nan_row_values</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_nan_row_values(ekp::EnsembleKalmanProcess)</code></pre><p>Return <code>nan_row_values</code> field of EnsembleKalmanProcess.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L654-L657">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.list_update_groups_over_minibatch" href="#EnsembleKalmanProcesses.list_update_groups_over_minibatch"><code>EnsembleKalmanProcesses.list_update_groups_over_minibatch</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">list_update_groups_over_minibatch(ekp::EnsembleKalmanProcess)</code></pre><p>Return u<em>groups and g</em>groups for the current minibatch, i.e. the subset of </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L670-L673">source</a></section></article><h2 id="errors_api"><a class="docs-heading-anchor" href="#errors_api">Error metrics</a><a id="errors_api-1"></a><a class="docs-heading-anchor-permalink" href="#errors_api" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_average_rmse" href="#EnsembleKalmanProcesses.compute_average_rmse"><code>EnsembleKalmanProcesses.compute_average_rmse</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_average_rmse(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes the average covariance-weighted error over the forward model ensemble, normalized by the dimension: <code>1/dim(y) * tr((g_i - y)&#39; *  Γ⁻¹ *  (g_i - y))</code>. The error is retrievable as <code>get_error_metrics(ekp)[&quot;avg_rmse&quot;]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L930">source</a></section><section><div><p>For Unscented processes it doesn&#39;t make sense to average RMSE at sigma points, so it is evaluated at the mean only, where it is exactly equal to <code>sqrt(compute_loss_at_mean(uki))</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L923-L925">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_loss_at_mean" href="#EnsembleKalmanProcesses.compute_loss_at_mean"><code>EnsembleKalmanProcesses.compute_loss_at_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_loss_at_mean(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes the covariance-weighted error of the mean of the forward model output, normalized by the dimension <code>1/dim(y) * (ḡ - y)&#39; * Γ⁻¹ * (ḡ - y)</code>. The error is retrievable as <code>get_error_metrics(ekp)[&quot;loss&quot;]</code> or returned from <code>get_error(ekp)</code> if a prior is not provided to the process</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L954">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_average_unweighted_rmse" href="#EnsembleKalmanProcesses.compute_average_unweighted_rmse"><code>EnsembleKalmanProcesses.compute_average_unweighted_rmse</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_average_unweighted_rmse(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes the average unweighted error over the forward model ensemble, normalized by the dimension: <code>1/dim(y) * tr((g_i - y)&#39; * (g_i - y))</code>. The error is retrievable as <code>get_error_metrics(ekp)[&quot;unweighted_avg_rmse&quot;]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L906">source</a></section><section><div><p>For Unscented processes it doesn&#39;t make sense to average unweighted RMSE at sigma points, so it is evaluated at the mean only, where it is exactly equal to <code>sqrt(compute_unweighted_loss_at_mean(uki))</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedKalmanInversion.jl#L932-L934">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_unweighted_loss_at_mean" href="#EnsembleKalmanProcesses.compute_unweighted_loss_at_mean"><code>EnsembleKalmanProcesses.compute_unweighted_loss_at_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_unweighted_loss_at_mean(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes the unweighted error of the mean of the forward model output, normalized by the dimension <code>1/dim(y) * (ḡ - y)&#39; * (ḡ - y)</code>. The error is retrievable as <code>get_error_metrics(ekp)[&quot;unweighted_loss&quot;]</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L970">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_bayes_loss_at_mean" href="#EnsembleKalmanProcesses.compute_bayes_loss_at_mean"><code>EnsembleKalmanProcesses.compute_bayes_loss_at_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_bayes_loss_at_mean(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes the bayes loss of the mean of the forward model output, normalized by dimensions <code>(1/dim(y)*dim(u)) * [(ḡ - y)&#39; * Γ⁻¹ * (ḡ - y) + (̄u - m)&#39; * C⁻¹ * (̄u - m)]</code>. If the prior is not provided to the process on creation of EKP, then <code>m</code> and <code>C</code> are estimated from the initial ensemble.</p><p>The error is retrievable as <code>get_error_metrics(ekp)[&quot;bayes_loss&quot;]</code> or returned from <code>get_error(ekp)</code> if a prior is provided to the process</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L985">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_crps" href="#EnsembleKalmanProcesses.compute_crps"><code>EnsembleKalmanProcesses.compute_crps</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_crps(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes a Gaussian approximation of CRPS (continuous rank probability score) of the ensemble with the observation (performing through a whitening by C^GG, see e.g., Zheng, Sun, 2025, https://arxiv.org/abs/2410.09133).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1022">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.compute_error!" href="#EnsembleKalmanProcesses.compute_error!"><code>EnsembleKalmanProcesses.compute_error!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">compute_error!(ekp::EnsembleKalmanProcess) -&gt; Any
</code></pre><p>Computes a variety of error metrics and stores this in <code>EnsembleKalmanProcess</code>. (retrievable with <code>get_error_metrics(ekp)</code>) currently available:</p><ul><li><code>avg_rmse</code>           computed with <code>compute_average_rmse(ekp)</code></li><li><code>loss</code>               computed with <code>compute_loss_at_mean(ekp)</code></li><li><code>unweighed_avg_rmse</code> computed with <code>compute_average_unweighted_rmse(ekp)</code></li><li><code>unweighted_loss</code>    computed with <code>compute_unweighted_loss_at_mean(ekp)</code></li><li><code>bayes_loss</code>         computed with <code>compute_bayes_loss_at_mean(ekp)</code></li><li><code>crps</code>               computed with <code>compute_crps(ekp)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1049">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_error_metrics" href="#EnsembleKalmanProcesses.get_error_metrics"><code>EnsembleKalmanProcesses.get_error_metrics</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_error_metrics(ekp::EnsembleKalmanProcess)</code></pre><p>Returns the stored <code>error_metrics</code>, created with <code>compute_error!</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1089-L1093">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_error" href="#EnsembleKalmanProcesses.get_error"><code>EnsembleKalmanProcesses.get_error</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_error(ekp::EnsembleKalmanProcess)</code></pre><p>[For back compatability] Returns the relevant loss function that is minimized over EKP iterations.</p><ul><li>If prior provided to the process:     <code>get_error_metrics(ekp)[&quot;bayes_loss&quot;]</code>, the loss computed with <code>compute_bayes_loss_at_mean(ekp)</code></li><li>If prior not provided to the process: <code>get_error_metrics(ekp)[&quot;loss&quot;]</code>, the loss computed with <code>compute_loss_at_mean(ekp)</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1096-L1102">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.lmul_obs_noise_cov" href="#EnsembleKalmanProcesses.lmul_obs_noise_cov"><code>EnsembleKalmanProcesses.lmul_obs_noise_cov</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lmul_obs_noise_cov(ekp::EnsembleKalmanProcess, X::AbstractVecOrMat) -&gt; Any
</code></pre><p>Convenience function to multiply <code>X</code> by <code>obs_noise_cov</code> on the left without building the full matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L791">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.lmul_obs_noise_cov_inv" href="#EnsembleKalmanProcesses.lmul_obs_noise_cov_inv"><code>EnsembleKalmanProcesses.lmul_obs_noise_cov_inv</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Convenience function to multiply <code>X</code> by <code>obs_noise_cov_inv</code> on the left without building the full matrix.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L800">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.lmul_obs_noise_cov!" href="#EnsembleKalmanProcesses.lmul_obs_noise_cov!"><code>EnsembleKalmanProcesses.lmul_obs_noise_cov!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Convenience function to multiply <code>X</code> by <code>obs_noise_cov</code> on the left without building the full matrix, and storing the result in the first argument <code>out</code>, and at a set of indices <code>idx_triple = [(block_idx, local_idx, global_idx), ...]</code>. Here, for each triple the multiplication will: </p><ul><li>select block <code>block_idx</code> from the unbuilt <code>obs_noise_cov_inv</code></li><li>select local indices <code>[:,local_idx]</code> of this block</li><li>multiply with the corresponding global indices <code>X[global_idx,:]</code></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L809">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.lmul_obs_noise_cov_inv!" href="#EnsembleKalmanProcesses.lmul_obs_noise_cov_inv!"><code>EnsembleKalmanProcesses.lmul_obs_noise_cov_inv!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">lmul_obs_noise_cov_inv!(out::AbstractMatrix, ekp::EnsembleKalmanProcess, X::AbstractVecOrMat, idx_set::AbstractVector)
</code></pre><p>Convenience function to multiply <code>X</code> by <code>obs_noise_cov_inv</code> on the left without building the full matrix, and storing the result in the first argument <code>out</code>, and at a set of indices <code>idx_triple = [(block_idx, local_idx, global_idx), ...]</code>. Here, for each triple the multiplication will: </p><ul><li>select block <code>block_idx</code> from the unbuilt <code>obs_noise_cov_inv</code></li><li>select local indices <code>[:,local_idx]</code> of this block</li><li>multiply with the corresponding global indices <code>X[global_idx,:]</code></li></ul><p>The primary use case is in <code>update_ensemble!</code> for <code>TransformInversion()</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L826">source</a></section></article><h2 id="scheduler_api"><a class="docs-heading-anchor" href="#scheduler_api">Learning Rate Schedulers</a><a id="scheduler_api-1"></a><a class="docs-heading-anchor-permalink" href="#scheduler_api" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.DefaultScheduler" href="#EnsembleKalmanProcesses.DefaultScheduler"><code>EnsembleKalmanProcesses.DefaultScheduler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DefaultScheduler{FT} &lt;: EnsembleKalmanProcesses.LearningRateScheduler</code></pre><p>Scheduler containing a default constant step size, users can override this temporarily within <code>update_ensemble!</code>.</p><ul><li><p><code>Δt_default::Any</code></p><p>step size</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/LearningRateSchedulers.jl#L8">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.MutableScheduler" href="#EnsembleKalmanProcesses.MutableScheduler"><code>EnsembleKalmanProcesses.MutableScheduler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct MutableScheduler{FT} &lt;: EnsembleKalmanProcesses.LearningRateScheduler</code></pre><p>Scheduler containing a mutable constant step size, users can override this permanently within <code>update_ensemble!</code>.</p><ul><li><p><code>Δt_mutable::Vector</code></p><p>mutable step size</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/LearningRateSchedulers.jl#L35">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.EKSStableScheduler" href="#EnsembleKalmanProcesses.EKSStableScheduler"><code>EnsembleKalmanProcesses.EKSStableScheduler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct EKSStableScheduler{FT} &lt;: EnsembleKalmanProcesses.LearningRateScheduler</code></pre><p>Scheduler known to be stable for EKS, In particular, <span>$\Delta t = \frac{\alpha}{\|U\| + \varepsilon}$</span> where <span>$U = (G(u) - \bar{G(u)})^T\Gamma^{-1}(G(u) - y)$</span>.  Cannot be overriden.</p><ul><li><p><code>numerator::Any</code></p><p>the numerator <span>$\alpha$</span></p></li><li><p><code>nugget::Any</code></p><p>the nugget term <span>$\varepsilon$</span></p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/LearningRateSchedulers.jl#L67">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.DataMisfitController" href="#EnsembleKalmanProcesses.DataMisfitController"><code>EnsembleKalmanProcesses.DataMisfitController</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">struct DataMisfitController{FT, S} &lt;: EnsembleKalmanProcesses.LearningRateScheduler</code></pre><p>Scheduler from Iglesias, Yang, 2021, Based on Bayesian Tempering. Terminates at <code>T=1</code> by default, and at this time, ensemble spread provides a (more) meaningful approximation of posterior uncertainty In particular, for parameters <span>$\theta_j$</span> at step <span>$n$</span>, to calculate the next timestep <span>$\Delta t_n = \min\left(\max\left(\frac{J}{2\Phi}, \sqrt{\frac{J}{2\langle \Phi, \Phi \rangle}}\right), 1-\sum^{n-1}_i t_i\right)$</span> where <span>$\Phi_j = \|\Gamma^{-\frac{1}{2}}(G(\theta_j) - y)\|^2$</span>.  Cannot be overriden by user provided timesteps. By default termination returns <code>true</code> from <code>update_ensemble!</code> and </p><ul><li>if <code>on_terminate == &quot;stop&quot;</code>, stops further iteration.</li><li>if <code>on_terminate == &quot;continue_fixed&quot;</code>, continues iteration with the final timestep fixed</li><li>if <code>on_terminate == &quot;continue&quot;</code>, continues the algorithm (though no longer compares to <span>$1-\sum^{n-1}_i t_i$</span>) </li></ul><p>The user may also change the <code>T</code> with <code>terminate_at</code> keyword.</p><ul><li><p><code>iteration::Vector{Int64}</code></p><p>the current iteration</p></li><li><p><code>terminate_at::Any</code></p><p>the algorithm time for termination, default: 1.0</p></li><li><p><code>on_terminate::Any</code></p><p>the action on termination, default: &quot;stop&quot;,</p></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/LearningRateSchedulers.jl#L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.calculate_timestep!" href="#EnsembleKalmanProcesses.calculate_timestep!"><code>EnsembleKalmanProcesses.calculate_timestep!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">calculate_timestep!(ekp::EnsembleKalmanProcess, g::AbstractMatrix, Δt_new::Union{Nothing, AbstractFloat}) -&gt; Any
</code></pre><p>Calculates next timestep by pushing to ekp.Δt,  <code>!isnothing(return_value)</code> implies termination condition has been met</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/LearningRateSchedulers.jl#L156">source</a></section></article><h2 id="Failure-and-NaN-handling"><a class="docs-heading-anchor" href="#Failure-and-NaN-handling">Failure and NaN handling</a><a id="Failure-and-NaN-handling-1"></a><a class="docs-heading-anchor-permalink" href="#Failure-and-NaN-handling" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.FailureHandler" href="#EnsembleKalmanProcesses.FailureHandler"><code>EnsembleKalmanProcesses.FailureHandler</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">FailureHandler{P &lt;: Process, FM &lt;: FailureHandlingMethod}</code></pre><p>Structure defining the failure handler method used in the EnsembleKalmanProcess.</p><p><strong>Fields</strong></p><ul><li><p><code>failsafe_update::Function</code></p><p>Failsafe algorithmic update equation</p></li></ul><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanInversion.jl#L82"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanInversion.jl:82</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanInversion.jl#L95"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanInversion.jl:95</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleKalmanSampler.jl#L62"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleKalmanSampler.jl:62</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleTransformKalmanInversion.jl#L95"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleTransformKalmanInversion.jl:95</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/EnsembleTransformKalmanInversion.jl#L107"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/EnsembleTransformKalmanInversion.jl:107</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/GaussNewtonKalmanInversion.jl#L28"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/GaussNewtonKalmanInversion.jl:28</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/GaussNewtonKalmanInversion.jl#L41"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/GaussNewtonKalmanInversion.jl:41</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/SparseEnsembleKalmanInversion.jl#L44"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/SparseEnsembleKalmanInversion.jl:44</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/SparseEnsembleKalmanInversion.jl#L56"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/SparseEnsembleKalmanInversion.jl:56</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedKalmanInversion.jl#L316"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedKalmanInversion.jl:316</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedKalmanInversion.jl#L335"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedKalmanInversion.jl:335</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedTransformKalmanInversion.jl#L102"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedTransformKalmanInversion.jl:102</code></a>.</p><pre><code class="language-julia hljs">FailureHandler(process, method)</code></pre><p>defined at <a href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/tree/bb2e8665d24429ad0510ae8fe1293680402eac3b//src/UnscentedTransformKalmanInversion.jl#L121"><code>/home/runner/work/EnsembleKalmanProcesses.jl/EnsembleKalmanProcesses.jl/src/UnscentedTransformKalmanInversion.jl:121</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L75-L87">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.SampleSuccGauss" href="#EnsembleKalmanProcesses.SampleSuccGauss"><code>EnsembleKalmanProcesses.SampleSuccGauss</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">SampleSuccGauss &lt;: FailureHandlingMethod</code></pre><p>Failure handling method that substitutes failed ensemble members by new samples from the empirical Gaussian distribution defined by the updated successful ensemble.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L67-L72">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.IgnoreFailures" href="#EnsembleKalmanProcesses.IgnoreFailures"><code>EnsembleKalmanProcesses.IgnoreFailures</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Failure handling method that ignores forward model failures</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L64">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.sample_empirical_gaussian" href="#EnsembleKalmanProcesses.sample_empirical_gaussian"><code>EnsembleKalmanProcesses.sample_empirical_gaussian</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">sample_empirical_gaussian(
    rng::AbstractRNG,
    u::AbstractMatrix{FT},
    n::IT;
    inflation::Union{FT, Nothing} = nothing,
) where {FT &lt;: Real, IT &lt;: Int}</code></pre><p>Returns <code>n</code> samples from an empirical Gaussian based on point estimates <code>u</code>, adding inflation if the covariance is singular.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1115-L1124">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.split_indices_by_success" href="#EnsembleKalmanProcesses.split_indices_by_success"><code>EnsembleKalmanProcesses.split_indices_by_success</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs"> split_indices_by_success(g::AbstractMatrix{FT}) where {FT &lt;: Real}</code></pre><p>Returns the successful/failed particle indices given a matrix with output vectors stored as columns. Failures are defined for particles containing at least one NaN output element.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1153-L1158">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.impute_over_nans" href="#EnsembleKalmanProcesses.impute_over_nans"><code>EnsembleKalmanProcesses.impute_over_nans</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">impute_over_nans(g::AbstractMatrix, nan_tolerance, nan_row_values::AbstractVector) -&gt; Any
</code></pre><p>Imputation of &quot;reasonable values&quot; over NaNs in the following manner</p><ol><li>Detect failures: check if any column contains NaNs exceeding the fraction <code>nan_tolerance</code>, such members are flagged as failures</li><li>Impute values in rows with few NaNs: Of the admissible columns, any NaNs are replaced by finite values of the ensemble-mean (without NaNs) over the row. </li><li>Impute a value for row with all NaNs: Of the admissible columns, the value of the observation itself <code>y</code> is imputed</li></ol></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanProcess.jl#L1257">source</a></section></article><h2 id="process_api"><a class="docs-heading-anchor" href="#process_api">Process-specific</a><a id="process_api-1"></a><a class="docs-heading-anchor-permalink" href="#process_api" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_prior_mean" href="#EnsembleKalmanProcesses.get_prior_mean"><code>EnsembleKalmanProcesses.get_prior_mean</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_prior_mean(process::Inversion) -&gt; Union{Nothing, AbstractVector}
</code></pre><p>Returns the stored <code>prior_mean</code> from the Inversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanInversion.jl#L25">source</a></section><section><div><pre><code class="language-julia hljs">get_prior_mean(process::TransformInversion) -&gt; Union{Nothing, AbstractVector}
</code></pre><p>Returns the stored <code>prior_mean</code> from the TransformInversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L31">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_prior_cov" href="#EnsembleKalmanProcesses.get_prior_cov"><code>EnsembleKalmanProcesses.get_prior_cov</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_prior_cov(process::Inversion) -&gt; Union{Nothing, LinearAlgebra.UniformScaling, AbstractMatrix}
</code></pre><p>Returns the stored <code>prior_cov</code> from the Inversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanInversion.jl#L32">source</a></section><section><div><pre><code class="language-julia hljs">get_prior_cov(process::TransformInversion) -&gt; Union{Nothing, LinearAlgebra.UniformScaling, AbstractMatrix}
</code></pre><p>Returns the stored <code>prior_cov</code> from the TransformInversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_impose_prior" href="#EnsembleKalmanProcesses.get_impose_prior"><code>EnsembleKalmanProcesses.get_impose_prior</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_impose_prior(process::Inversion) -&gt; Bool
</code></pre><p>Returns the stored <code>impose_prior</code> from the Inversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanInversion.jl#L39">source</a></section><section><div><pre><code class="language-julia hljs">get_impose_prior(process::TransformInversion) -&gt; Bool
</code></pre><p>Returns the stored <code>impose_prior</code> from the TransformInversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L45">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_buffer" href="#EnsembleKalmanProcesses.get_buffer"><code>EnsembleKalmanProcesses.get_buffer</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Returns the stored <code>buffer</code> from the TransformInversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L52">source</a></section><section><div><pre><code class="language-julia hljs">get_buffer(p::TransformUnscented) -&gt; AbstractVector
</code></pre><p>Returns the stored <code>buffer</code> from the TransformUnscented process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/UnscentedTransformKalmanInversion.jl#L95">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="EnsembleKalmanProcesses.get_default_multiplicative_inflation" href="#EnsembleKalmanProcesses.get_default_multiplicative_inflation"><code>EnsembleKalmanProcesses.get_default_multiplicative_inflation</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">get_default_multiplicative_inflation(process::Inversion) -&gt; AbstractFloat
</code></pre><p>Returns the stored <code>default_multiplicative_inflation</code> from the Inversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleKalmanInversion.jl#L46">source</a></section><section><div><pre><code class="language-julia hljs">get_default_multiplicative_inflation(p::TransformInversion) -&gt; AbstractFloat
</code></pre><p>Returns the stored <code>default_multiplicative_inflation</code> from the TransformInversion process </p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/CliMA/EnsembleKalmanProcesses.jl/blob/bb2e8665d24429ad0510ae8fe1293680402eac3b/src/EnsembleTransformKalmanInversion.jl#L59">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../DataContainers/">« DataContainers</a><a class="docs-footer-nextpage" href="../Inversion/">Inversion »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 7 October 2025 21:12">Tuesday 7 October 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
